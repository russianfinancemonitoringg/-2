<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Отзывы - Сервис отзывов</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Общие стили */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #121212;
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Хлебные крошки */
        .breadcrumbs {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px;
            background-color: #1e1e1e;
            border-radius: 10px;
            flex-wrap: wrap;
        }

        .breadcrumb {
            background: none;
            border: none;
            color: #64b5f6;
            font-size: 16px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .breadcrumb:hover {
            background-color: #2d2d2d;
            color: #90caf9;
        }

        .separator {
            margin: 0 10px;
            color: #666;
        }

        /* Заголовки */
        h1 {
            color: #ffffff;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .subtitle {
            color: #aaa;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        /* Карточки */
        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .card {
            background-color: #1e1e1e;
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
            border: 1px solid #333;
            cursor: pointer;
            text-align: center;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: #64b5f6;
        }

        .category-card i {
            font-size: 3rem;
            color: #64b5f6;
            margin-bottom: 15px;
        }

        .category-card h3 {
            color: #ffffff;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .category-card p {
            color: #aaa;
            font-size: 0.9rem;
        }

        /* Кнопки */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            font-weight: 600;
        }

        .btn-primary {
            background-color: #1976d2;
            color: white;
        }

        .btn-primary:hover {
            background-color: #1565c0;
        }

        .btn-secondary {
            background-color: #424242;
            color: white;
            margin-top: 30px;
        }

        .btn-secondary:hover {
            background-color: #555;
        }

        /* Форма отзыва */
        .review-form {
            margin-bottom: 40px;
            text-align: left;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #e0e0e0;
            font-weight: 600;
        }

        textarea {
            width: 100%;
            padding: 15px;
            background-color: #2d2d2d;
            border: 1px solid #444;
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 16px;
            resize: vertical;
        }

        textarea:focus {
            outline: none;
            border-color: #64b5f6;
        }

        /* Рейтинг */
        .rating {
            display: flex;
            gap: 5px;
            margin-top: 5px;
        }

        .star {
            font-size: 2rem;
            color: #555;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star:hover,
        .star.active {
            color: #ffc107;
        }

        /* Список отзывов */
        .reviews-container {
            margin-top: 30px;
        }

        .review-item {
            background-color: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #1976d2;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: #aaa;
            font-size: 0.9rem;
        }

        .review-rating {
            color: #ffc107;
        }

        .review-text {
            color: #e0e0e0;
            line-height: 1.6;
        }

        .no-reviews {
            text-align: center;
            padding: 40px;
            color: #777;
            font-style: italic;
        }

        #captcha-notice {
            margin-top: 15px;
            color: #888;
            font-size: 0.9rem;
        }

        /* Таблица данных */
        .data-table-container {
            margin-top: 30px;
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background-color: #1e1e1e;
            border-radius: 10px;
            overflow: hidden;
        }

        .data-table th {
            background-color: #1976d2;
            color: white;
            padding: 15px;
            text-align: left;
        }

        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #333;
            color: #e0e0e0;
        }

        .data-table tr:hover {
            background-color: #2d2d2d;
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .cards {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 10px;
            }
            
            .data-table {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .breadcrumbs {
                font-size: 0.9rem;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Верхняя навигация (хлебные крошки) -->
        <nav class="breadcrumbs">
            <button class="breadcrumb" data-level="home">Главная</button>
            <span class="separator">/</span>
            <button class="breadcrumb" data-level="category" style="display: none;">Категория</button>
            <span class="separator" style="display: none;">/</span>
            <button class="breadcrumb" data-level="organization" style="display: none;">Организация</button>
            <span class="separator" style="display: none;">/</span>
            <button class="breadcrumb" data-level="city" style="display: none;">Город</button>
        </nav>

        <!-- Основное содержимое (меняется динамически) -->
        <main id="content">
            <!-- Уровень 1: Главная страница - Категории -->
            <div class="level" id="level-home">
                <h1><i class="fas fa-star"></i> Отзывы</h1>
                <p class="subtitle">Выберите категорию для просмотра отзывов</p>
                
                <div class="cards">
                    <div class="card category-card" data-category="bank">
                        <i class="fas fa-university"></i>
                        <h3>Банк</h3>
                        <p>Отзывы о банках и финансовых услугах</p>
                    </div>
                    
                    <div class="card category-card" data-category="cars">
                        <i class="fas fa-car"></i>
                        <h3>Тачки</h3>
                        <p>Отзывы об автомобилях и автосервисах</p>
                    </div>
                    
                    <!-- Добавьте больше категорий по мере необходимости -->
                </div>
            </div>

            <!-- Уровень 2: Категория - Организации -->
            <div class="level" id="level-category" style="display: none;">
                <h1 id="category-title"></h1>
                <p class="subtitle">Выберите организацию</p>
                
                <div class="cards" id="organizations-container">
                    <!-- Организации загружаются динамически -->
                </div>
            </div>

            <!-- Уровень 3: Организация - Города -->
            <div class="level" id="level-organization" style="display: none;">
                <h1 id="organization-title"></h1>
                <p class="subtitle">Выберите город</p>
                
                <div class="cards" id="cities-container">
                    <!-- Города загружаются динамически -->
                </div>
            </div>

            <!-- Уровень 4: Город - Отзывы -->
            <div class="level" id="level-city" style="display: none;">
                <h1 id="city-title"></h1>
                <p class="subtitle" id="city-subtitle"></p>
                
                <!-- Форма добавления отзыва -->
                <div class="review-form card">
                    <h3><i class="fas fa-plus-circle"></i> Добавить отзыв</h3>
                    <div class="form-group">
                        <label for="review-text">Текст отзыва:</label>
                        <textarea id="review-text" rows="4" placeholder="Напишите ваш отзыв здесь..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Оценка:</label>
                        <div class="rating">
                            <span class="star" data-value="1">★</span>
                            <span class="star" data-value="2">★</span>
                            <span class="star" data-value="3">★</span>
                            <span class="star" data-value="4">★</span>
                            <span class="star" data-value="5">★</span>
                        </div>
                    </div>
                    
                    <button id="submit-review" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Отправить отзыв
                    </button>
                    
                    <div id="captcha-notice">
                        <small><i class="fas fa-shield-alt"></i> Для защиты от спама все отзывы проходят модерацию</small>
                    </div>
                </div>
                
                <!-- Список отзывов -->
                <div class="reviews-container">
                    <h3><i class="fas fa-comments"></i> Отзывы пользователей</h3>
                    <div id="reviews-list">
                        <!-- Отзывы загружаются динамически -->
                        <div class="no-reviews">
                            <p>Пока нет отзывов. Будьте первым!</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Таблица с данными (можно раскрыть/скрыть) -->
        <footer>
            <button id="toggle-table" class="btn btn-secondary">
                <i class="fas fa-table"></i> Показать таблицу данных
            </button>
            
            <div class="data-table-container" id="data-table-container" style="display: none;">
                <h3><i class="fas fa-database"></i> Все данные</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Категория</th>
                            <th>Организация</th>
                            <th>Город</th>
                            <th>Дата</th>
                            <th>Отзыв</th>
                            <th>Оценка</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <!-- Данные заполняются динамически -->
                    </tbody>
                </table>
            </div>
        </footer>
    </div>

    <script>
        // Данные приложения (в реальном приложении будут загружаться с сервера)
        const appData = {
            categories: {
                bank: {
                    name: "Банк",
                    icon: "fa-university",
                    organizations: {
                        sber: {
                            name: "СберБанк",
                            cities: ["Москва", "Санкт-Петербург", "Екатеринбург", "Казань", "Новосибирск"]
                        },
                        vtb: {
                            name: "ВТБ",
                            cities: ["Москва", "Санкт-Петербург", "Краснодар", "Сочи", "Ростов-на-Дону"]
                        },
                        alpha: {
                            name: "Альфа-Банк",
                            cities: ["Москва", "Санкт-Петербург", "Нижний Новгород", "Самара", "Уфа"]
                        },
                        tinkoff: {
                            name: "Тинькофф",
                            cities: ["Москва", "Санкт-Петербург", "Екатеринбург", "Казань", "Владивосток"]
                        },
                        psb: {
                            name: "ПСБ",
                            cities: ["Москва", "Санкт-Петербург", "Калининград", "Воронеж", "Иркутск"]
                        },
                        rshb: {
                            name: "РСХБ",
                            cities: ["Москва", "Санкт-Петербург", "Тюмень", "Омск", "Красноярск"]
                        }
                    }
                },
                cars: {
                    name: "Тачки",
                    icon: "fa-car",
                    organizations: {
                        toyota: {
                            name: "Toyota",
                            cities: ["Москва", "Санкт-Петербург", "Красноярск", "Омск", "Тюмень"]
                        },
                        bmw: {
                            name: "BMW",
                            cities: ["Москва", "Санкт-Петербург", "Калининград", "Воронеж", "Иркутск"]
                        },
                        lada: {
                            name: "Lada",
                            cities: ["Москва", "Санкт-Петербург", "Тольятти", "Челябинск", "Волгоград"]
                        },
                        mercedes: {
                            name: "Mercedes-Benz",
                            cities: ["Москва", "Санкт-Петербург", "Сочи", "Казань", "Екатеринбург"]
                        },
                        audi: {
                            name: "Audi",
                            cities: ["Москва", "Санкт-Петербург", "Уфа", "Самара", "Новосибирск"]
                        }
                    }
                }
            },
            reviews: [
                {
                    id: 1,
                    category: "bank",
                    organization: "sber",
                    city: "Москва",
                    text: "Отличный банк, хорошее обслуживание. Рекомендую!",
                    rating: 5,
                    date: "2023-10-15"
                },
                {
                    id: 2,
                    category: "bank",
                    organization: "sber",
                    city: "Санкт-Петербург",
                    text: "Долго ждал в очереди, но менеджер помог решить вопрос.",
                    rating: 3,
                    date: "2023-10-10"
                },
                {
                    id: 3,
                    category: "cars",
                    organization: "toyota",
                    city: "Москва",
                    text: "Качественный сервис, все сделали быстро и профессионально.",
                    rating: 4,
                    date: "2023-10-05"
                },
                {
                    id: 4,
                    category: "bank",
                    organization: "vtb",
                    city: "Москва",
                    text: "Удобное мобильное приложение, но комиссии высокие.",
                    rating: 3,
                    date: "2023-09-28"
                },
                {
                    id: 5,
                    category: "cars",
                    organization: "bmw",
                    city: "Санкт-Петербург",
                    text: "Отличный сервис, но дорогое обслуживание.",
                    rating: 4,
                    date: "2023-09-20"
                }
            ]
        };

        // Текущее состояние приложения
        let currentState = {
            level: "home",
            category: null,
            organization: null,
            city: null,
            selectedRating: 0
        };

        // DOM элементы
        const contentElement = document.getElementById('content');
        const breadcrumbs = document.querySelectorAll('.breadcrumb');
        const separators = document.querySelectorAll('.separator');

        // Инициализация приложения
        document.addEventListener('DOMContentLoaded', function() {
            // Загрузка начального состояния
            updateBreadcrumbs();
            renderHomePage();
            updateDataTable();
            
            // Обработчики событий для категорий
            document.querySelectorAll('.category-card').forEach(card => {
                card.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    navigateToCategory(category);
                });
            });
            
            // Обработчик отправки отзыва
            document.getElementById('submit-review').addEventListener('click', addReview);
            
            // Обработчик звёзд рейтинга
            document.querySelectorAll('.star').forEach(star => {
                star.addEventListener('click', function() {
                    const value = parseInt(this.getAttribute('data-value'));
                    setRating(value);
                });
            });
            
            // Обработчик переключения таблицы
            document.getElementById('toggle-table').addEventListener('click', toggleDataTable);
            
            // Обработчики хлебных крошек
            document.querySelectorAll('.breadcrumb').forEach(crumb => {
                crumb.addEventListener('click', function() {
                    const level = this.getAttribute('data-level');
                    navigateToLevel(level);
                });
            });
        });

        // Навигация по уровням
        function navigateToLevel(level) {
            currentState.level = level;
            
            // Сброс состояний в зависимости от уровня
            if (level === 'home') {
                currentState.category = null;
                currentState.organization = null;
                currentState.city = null;
                renderHomePage();
            } else if (level === 'category') {
                currentState.organization = null;
                currentState.city = null;
                renderCategoryPage();
            } else if (level === 'organization') {
                currentState.city = null;
                renderOrganizationPage();
            } else if (level === 'city') {
                renderCityPage();
            }
            
            updateBreadcrumbs();
        }

        // Навигация к категории
        function navigateToCategory(categoryId) {
            currentState.level = 'category';
            currentState.category = categoryId;
            currentState.organization = null;
            currentState.city = null;
            
            renderCategoryPage();
            updateBreadcrumbs();
        }

        // Навигация к организации
        function navigateToOrganization(orgId) {
            currentState.level = 'organization';
            currentState.organization = orgId;
            currentState.city = null;
            
            renderOrganizationPage();
            updateBreadcrumbs();
        }

        // Навигация к городу
        function navigateToCity(city) {
            currentState.level = 'city';
            currentState.city = city;
            
            renderCityPage();
            updateBreadcrumbs();
        }

        // Обновление хлебных крошек
        function updateBreadcrumbs() {
            // Скрываем все крошки и разделители
            breadcrumbs.forEach((crumb, index) => {
                if (index > 0) crumb.style.display = 'none';
            });
            separators.forEach(sep => sep.style.display = 'none');
            
            // Показываем нужные крошки в зависимости от уровня
            document.querySelector('[data-level="home"]').style.display = 'inline-block';
            
            if (currentState.level === 'category' || currentState.level === 'organization' || currentState.level === 'city') {
                document.querySelector('[data-level="category"]').style.display = 'inline-block';
                document.querySelector('[data-level="category"]').textContent = appData.categories[currentState.category].name;
                separators[0].style.display = 'inline';
            }
            
            if (currentState.level === 'organization' || currentState.level === 'city') {
                document.querySelector('[data-level="organization"]').style.display = 'inline-block';
                document.querySelector('[data-level="organization"]').textContent = 
                    appData.categories[currentState.category].organizations[currentState.organization].name;
                separators[1].style.display = 'inline';
            }
            
            if (currentState.level === 'city') {
                document.querySelector('[data-level="city"]').style.display = 'inline-block';
                document.querySelector('[data-level="city"]').textContent = currentState.city;
                separators[2].style.display = 'inline';
            }
        }

        // Рендер главной страницы
        function renderHomePage() {
            document.querySelectorAll('.level').forEach(level => {
                level.style.display = 'none';
            });
            document.getElementById('level-home').style.display = 'block';
        }

        // Рендер страницы категории
        function renderCategoryPage() {
            const category = appData.categories[currentState.category];
            
            document.getElementById('category-title').textContent = category.name;
            document.getElementById('category-title').innerHTML = `<i class="fas ${category.icon}"></i> ${category.name}`;
            
            const container = document.getElementById('organizations-container');
            container.innerHTML = '';
            
            // Создаем карточки организаций
            for (const orgId in category.organizations) {
                const org = category.organizations[orgId];
                
                const card = document.createElement('div');
                card.className = 'card category-card';
                card.setAttribute('data-org', orgId);
                card.innerHTML = `
                    <i class="fas fa-building"></i>
                    <h3>${org.name}</h3>
                    <p>${org.cities.length} городов с отзывами</p>
                `;
                
                card.addEventListener('click', () => navigateToOrganization(orgId));
                container.appendChild(card);
            }
            
            document.querySelectorAll('.level').forEach(level => {
                level.style.display = 'none';
            });
            document.getElementById('level-category').style.display = 'block';
        }

        // Рендер страницы организации
        function renderOrganizationPage() {
            const category = appData.categories[currentState.category];
            const org = category.organizations[currentState.organization];
            
            document.getElementById('organization-title').textContent = org.name;
            document.getElementById('organization-title').innerHTML = `<i class="fas fa-building"></i> ${org.name}`;
            
            const container = document.getElementById('cities-container');
            container.innerHTML = '';
            
            // Создаем кнопки городов
            org.cities.forEach(city => {
                const card = document.createElement('div');
                card.className = 'card category-card';
                card.innerHTML = `
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>${city}</h3>
                    <p>Отзывы о ${org.name} в ${city}</p>
                `;
                
                card.addEventListener('click', () => navigateToCity(city));
                container.appendChild(card);
            });
            
            document.querySelectorAll('.level').forEach(level => {
                level.style.display = 'none';
            });
            document.getElementById('level-organization').style.display = 'block';
        }

        // Рендер страницы города
        function renderCityPage() {
            const category = appData.categories[currentState.category];
            const org = category.organizations[currentState.organization];
            
            document.getElementById('city-title').textContent = `${org.name} - ${currentState.city}`;
            document.getElementById('city-subtitle').textContent = `Отзывы о ${org.name} в ${currentState.city}`;
            
            // Отображаем отзывы для выбранной категории, организации и города
            displayReviews();
            
            document.querySelectorAll('.level').forEach(level => {
                level.style.display = 'none';
            });
            document.getElementById('level-city').style.display = 'block';
            
            // Сбрасываем форму
            document.getElementById('review-text').value = '';
            setRating(0);
        }

        // Отображение отзывов
        function displayReviews() {
            const reviewsList = document.getElementById('reviews-list');
            reviewsList.innerHTML = '';
            
            // Фильтруем отзывы по текущим параметрам
            const filteredReviews = appData.reviews.filter(review => {
                return review.category === currentState.category &&
                       review.organization === currentState.organization &&
                       review.city === currentState.city;
            });
            
            if (filteredReviews.length === 0) {
                reviewsList.innerHTML = `
                    <div class="no-reviews">
                        <p><i class="fas fa-comment-slash"></i> Пока нет отзывов. Будьте первым!</p>
                    </div>
                `;
                return;
            }
            
            // Сортируем отзывы по дате (новые первыми)
            filteredReviews.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Отображаем каждый отзыв
            filteredReviews.forEach(review => {
                const reviewElement = document.createElement('div');
                reviewElement.className = 'review-item';
                reviewElement.innerHTML = `
                    <div class="review-header">
                        <span>${review.date}</span>
                        <span class="review-rating">${'★'.repeat(review.rating)}${'☆'.repeat(5-review.rating)}</span>
                    </div>
                    <div class="review-text">${review.text}</div>
                `;
                reviewsList.appendChild(reviewElement);
            });
        }

        // Установка рейтинга
        function setRating(value) {
            currentState.selectedRating = value;
            
            document.querySelectorAll('.star').forEach(star => {
                const starValue = parseInt(star.getAttribute('data-value'));
                
                if (starValue <= value) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // Добавление нового отзыва
        function addReview() {
            const reviewText = document.getElementById('review-text').value.trim();
            
            if (!reviewText) {
                alert('Пожалуйста, введите текст отзыва');
                return;
            }
            
            if (currentState.selectedRating === 0) {
                alert('Пожалуйста, поставьте оценку');
                return;
            }
            
            // Создаем новый отзыв
            const newReview = {
                id: appData.reviews.length + 1,
                category: currentState.category,
                organization: currentState.organization,
                city: currentState.city,
                text: reviewText,
                rating: currentState.selectedRating,
                date: new Date().toISOString().split('T')[0] // Текущая дата в формате YYYY-MM-DD
            };
            
            // В реальном приложении здесь будет отправка на сервер
            appData.reviews.push(newReview);
            
            // Обновляем отображение
            displayReviews();
            updateDataTable();
            
            // Сбрасываем форму
            document.getElementById('review-text').value = '';
            setRating(0);
            
            // Показываем уведомление
            alert('Спасибо за ваш отзыв! Он будет опубликован после модерации.');
        }

        // Переключение отображения таблицы данных
        function toggleDataTable() {
            const tableContainer = document.getElementById('data-table-container');
            const toggleButton = document.getElementById('toggle-table');
            
            if (tableContainer.style.display === 'none') {
                tableContainer.style.display = 'block';
                toggleButton.innerHTML = '<i class="fas fa-times"></i> Скрыть таблицу данных';
            } else {
                tableContainer.style.display = 'none';
                toggleButton.innerHTML = '<i class="fas fa-table"></i> Показать таблицу данных';
            }
        }

        // Обновление таблицы данных
        function updateDataTable() {
            const tableBody = document.getElementById('table-body');
            tableBody.innerHTML = '';
            
            appData.reviews.forEach(review => {
                const category = appData.categories[review.category].name;
                const org = appData.categories[review.category].organizations[review.organization].name;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${category}</td>
                    <td>${org}</td>
                    <td>${review.city}</td>
                    <td>${review.date}</td>
                    <td>${review.text}</td>
                    <td>${'★'.repeat(review.rating)}${'☆'.repeat(5-review.rating)}</td>
                `;
                tableBody.appendChild(row);
            });
        }
    </script>
</body>
</html>
